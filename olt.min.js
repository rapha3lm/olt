/* Ophthalmic lenses tools v1.0 by Rafael Martins - 06/10/2015 */
function Lens(t,s,e,a,r,h){"use strict";this.nearSph=t,this.nearCyl=s,this.nearAx=parseInt(e,10),this.nearSphFloat=parseFloat(this.nearSph),this.nearCylFloat=parseFloat(this.nearCyl),this.nearSphAbs=Math.abs(this.nearSphFloat),this.nearCylAbs=Math.abs(this.nearCylFloat),this.farSph=a,this.farCyl=r,this.farAx=parseInt(h,10),this.farSphFloat=parseFloat(this.farSph),this.farCylFloat=parseFloat(this.farCyl),this.farSphAbs=Math.abs(this.farSphFloat),this.farCylAbs=Math.abs(this.farCylFloat),"undefined"==typeof this.nearSph||"undefined"==typeof this.nearCyl||"undefined"==typeof this.nearAx?this.nearLens=!1:this.nearLens=!0,"undefined"==typeof this.farSph||"undefined"==typeof this.farCyl||"undefined"==typeof this.farAx?this.farLens=!1:this.farLens=!0,this.nearLens&&this.farLens?this.progressiveLens=!0:this.progressiveLens=!1,this.transponseAux=function(t,s,e){return this.sph=t,this.cyl=s,this.ax=e,this.newSph=this.sph+this.cyl,this.newCyl=-1*this.cyl,this.ax>90?this.newAx=this.ax-90:this.newAx=this.ax+90,this.result={sph:this.newSph,cyl:this.newCyl,ax:this.newAx},this.result};var i=this;this.maxDiopter=function(){return this.maxDiopterResult=[],i.nearLens?i.nearSphFloat*i.nearCylFloat>0?this.maxDiopterResult.near=i.nearSphAbs+i.nearCylAbs:this.maxDiopterResult.near=Math.max(i.nearSphAbs,i.nearCylAbs):this.maxDiopterResult.near=void 0,i.farLens?i.farSphFloat*i.farCylFloat>0?this.maxDiopterResult.far=i.farSphAbs+i.farCylAbs:this.maxDiopterResult.far=Math.max(i.farSphAbs,i.farCylAbs):this.maxDiopterResult.far=void 0,i.progressiveLens?this.maxDiopterResult.progressive=Math.max(this.maxDiopterResult.near,this.maxDiopterResult.far):this.maxDiopterResult.progressive=void 0,this.maxDiopterResult},this.transpose=function(t){switch(this.form=t,this.form){case"plus":this.plus=!0;break;case"minus":this.minus=!0;break;default:this.opposite=!0}return i.nearLens?this.opposite||this.plus&&i.nearCylFloat<0||this.minus&&i.nearCylFloat>0?(this.resultNear=i.transponseAux(i.nearSphFloat,i.nearCylFloat,i.nearAx),this.newNearSphPower=this.resultNear.sph,this.nearCylFloatInverted=this.resultNear.cyl,this.newNearAx=this.resultNear.ax):(this.newNearSphPower=i.nearSphFloat,this.nearCylFloatInverted=i.nearCylFloat,this.newNearAx=i.nearAx):(this.newNearSphPower=void 0,this.nearCylFloatInverted=void 0,this.newNearAx=void 0),i.farLens?this.opposite||this.plus&&i.farCylFloat<0||this.minus&&i.farCylFloat>0?(this.resultFar=i.transponseAux(i.farSphFloat,i.farCylFloat,i.farAx),this.newFarSphPower=this.resultFar.sph,this.farCylFloatInverted=this.resultFar.cyl,this.newFarAx=this.resultFar.ax):(this.newFarSphPower=i.farSphFloat,this.farCylFloatInverted=i.farCylFloat,this.newFarAx=i.farAx):(this.newFarSphPower=void 0,this.farCylFloatInverted=void 0,this.newFarAx=void 0),i.nearLens&&(this.near={sph:this.newNearSphPower.toFixed(2),cyl:this.nearCylFloatInverted.toFixed(2),ax:this.newNearAx}),i.farLens&&(this.far={sph:this.newFarSphPower.toFixed(2),cyl:this.farCylFloatInverted.toFixed(2),ax:this.newFarAx}),i.progressiveLens?this.bothTransposes={near:this.near,far:this.far}:i.nearLens?this.bothTransposes={near:this.near}:this.bothTransposes={far:this.far},this.bothTransposes}}